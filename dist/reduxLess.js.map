{"version":3,"file":"reduxLess.js","sources":["../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/_overArg.js","../node_modules/lodash-es/_getPrototype.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/isPlainObject.js","../src/constants.js","../src/middleware.js","../src/getReducer.js","../src/index.js"],"sourcesContent":["/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","export const SPLIT = '/';\nexport const ASYNC_ACTION_TYPE = '@@LESS/ASYNC_ACTION_TYPE';\n","import { ASYNC_ACTION_TYPE } from './constants';\n\nfunction warning() {\n  throw new Error('you have to apply middleware when you create the store');\n}\n\nexport let dispatch = warning; // eslint-disable-line import/no-mutable-exports\nexport let getState = warning; // eslint-disable-line import/no-mutable-exports\n\nexport default function reduxLessMiddleware({ dispatch: a, getState: b }) {\n  dispatch = a;\n  getState = b;\n  return next => (action) => {\n    if (action && action.type !== ASYNC_ACTION_TYPE) {\n      return next(action);\n    }\n  };\n}\n","import isPlainObject from 'lodash-es/isPlainObject';\nimport { dispatch, getState } from './middleware';\n\nimport { SPLIT, ASYNC_ACTION_TYPE } from './constants';\n\nfunction checkModel(model) {\n  if (!isPlainObject(model)) throw new Error(`model ${model} is not a plain object`);\n  const key = model.key;\n  if (!key || typeof key !== 'string' || key.indexOf(SPLIT) !== -1) {\n    throw new Error(`state key:\"${key}\" must a string and can not contain \"${SPLIT}\"`);\n  }\n  const _model = {\n    initialState: model.initialState,\n    key,\n    reducers: {}\n  };\n  const reducersName = Object.keys(model).filter(v => v !== 'initialState' && v !== 'key');\n  for (let i = 0; i < reducersName.length; i++) {\n    const name = reducersName[i];\n    const reducer = model[name];\n    if (typeof reducer !== 'function') {\n      throw new Error(`reducer \"${name}\" at \"${model.key}\" model must be a function`);\n    }\n    if (name.indexOf(SPLIT) !== -1) {\n      throw new Error(`reducer \"${name}\" at \"${model.key}\" can not contain \"${SPLIT}\"`);\n    }\n    _model.reducers[name] = reducer;\n  }\n  return _model;\n}\n\nfunction getReducer(model) {\n  const { key: stateKey, initialState, reducers } = checkModel(model);\n  const actions = {};\n  Object.keys(reducers).forEach((actionName) => {\n    const type = stateKey + SPLIT + actionName;\n    if (model[actionName].length <= 2) {\n      // support Flux Standard Action\n      actions[actionName] = (payload, error, meta) => ({ type, payload, error, meta });\n    } else {\n      actions[actionName] = (...args) => {\n        model[actionName](\n          (payload, error, meta) => dispatch({ type, payload, error, meta }),\n          (key = stateKey) => getState()[key],\n          args\n        );\n        return { type: ASYNC_ACTION_TYPE };\n      };\n    }\n  });\n  function reducer(state = initialState, action) {\n    const handlerName = action.type.split(SPLIT)[1];\n    if (!(handlerName in model)) return state;\n    const reducerFunc = model[handlerName];\n    if (reducerFunc.length > 2) return action.payload;\n    return reducerFunc(state, action);\n  }\n  reducer.key = stateKey;\n  reducer.actions = actions;\n  return reducer;\n}\n\nexport default getReducer;\n","import getReducer from './getReducer';\nimport reduxLessMiddleware from './middleware';\n\nexport default {\n  reduxLessMiddleware,\n  getReducer\n};\n"],"names":["objectProto","hasOwnProperty","symToStringTag","nativeObjectToString","SPLIT","ASYNC_ACTION_TYPE","warning","Error","dispatch","getState","reduxLessMiddleware","a","b","action","type","next","checkModel","model","isPlainObject","key","indexOf","_model","initialState","reducersName","Object","keys","filter","v","i","length","name","reducer","reducers","getReducer","stateKey","actions","forEach","actionName","payload","error","meta","args","state","handlerName","split","reducerFunc"],"mappings":"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"}